<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Decorators</title>
</head>
<body>
<script>
    // Логирующий декоратор (один аргумент)
    /*
    function work(a) { }

    function makeLogging(f, log) {
        return function (a) {
            log.push(a);
            return f.apply(this, arguments);
        }
    }

    var log = [];
    work = makeLogging(work, log);

    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert("Лог: " + log[i] );
    }
    */ //(+)
    /*
    function work(a) {

    }

    function makeLogging(f, log) {
        return function (a) {
            log.push(a);
            return f.call(this, a);
        }
    }

    var log = [];
    work = makeLogging(work, log);
    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert("Лог: " + log[i] );
    }
    */ //(+)
    /*
    function work(a) {
    }

    function makeLogging(f, log) {
        function wrapper(a) {
            log.push(a);
            return f.call(this, a);
        }
        return wrapper;
    }

    var log = [];
    work = makeLogging(work, log);
    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert("Лог: " + log[i] );
    }
    */ //(+)
    /*
    function work(a) {

    }

    function makeLogging(f, log) {
        function res(a) {
            log.push(a);
            return f.call(this, a);
        }
        return res;
    }

    var log = [];
    work = makeLogging(work, log);

    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert( "Лог: " + log[i] );
    }
    */ //(+)
    /*
    function work(a) {
    }

    function makeLogging(f, log) {
        function wrapper(a) {
            log.push(a);
            return f.call(this, a);
        }
        return wrapper;
    }

    var log = [];
    work = makeLogging(work, log);

    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert('Лог:' + log[i]);
    }
    */ //(+)
    /*
    function work(a) {
    }

    function makeLogging(f, log) {
        function wrapper(a) {
            log.push(a);
            return f.call(this, a);
        }
        return wrapper;
    }
    var log = [];
    work = makeLogging(work, log);
    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert("Лог: " + log[i] );
    }
    */ //(+)
    /*
    function work(a) {
    }

    function makeLogging(f, log) {
        return function (a) {
            log.push(a);
            return f.call(this, a)
        }
    }

    var log = [];
    work = makeLogging(work, log);

    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert( 'Лог:' + log[i] );
    }
    */ //(+)
    /*
    function work(a) {
    }

    function makeLogging(f, log) {
        function wrapper(a) {
            log.push(a);
            return f.call(this, a);
        }
        return wrapper;
    }
    var log = [];
    work = makeLogging(work, log);

    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert("Лог: " + log[i]);
    }
    */ //(+)
    /*
    function work(a) {
    }

    function makeLogging(f, log) {
        return function (a) {
            log.push(a);
            return f.call(this, a);
        }
    }

    var log = [];
    work = makeLogging(work, log);

    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert( "Лог: " + log[i] );
    }
    */ //(+)
    /*
    function work(a) {
    }

    function makeLogging(f, log) {
        function wrapper(a) {
            log.push(a);
            return f.call(this, a);
        }
        return wrapper;
    }

    var  log = [];
    work = makeLogging(work, log);
    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert("Лог: " + log[i]);
    }
    */ //(+)
    /*
    function work(a) {
    }

    function makeLogging(f, log) {
        function wrapper(a) {
            log.push(a);
            return f.call(this, a);
        }
        return wrapper;
    }

    var log = [];
    work = makeLogging(work, log);
    work(1);
    work(5);

    for (var i = 0; i < log.length; i++) {
        alert("Лог: " + log[i]);
    }
    */ //(+)

    // Логирующий декоратор (много аргументов)
    /*
    function work(a, b) {
        alert( a + b );
    }

    function makeLogging(f, log) {
        return function () {
            log.push([].slice.call(arguments));
            return f.apply(this, arguments);
        }
    }

    var log = [];
    work = makeLogging(work, log);

    work(1, 2);
    work(4, 5);

    for (var i = 0; i < log.length; i++){
        var args = log[i];
        alert("Лог: " + args.join( ) );
    }
*/ //(+)
    /*
    function work(a, b) {
        alert( a + b );
    }

    function makeLogging(f, log) {
        function wrapper() {
            log.push([].slice.call(arguments));
            return f.apply(this, arguments);
        }
        return wrapper;
    }

    var log = [];
    work = makeLogging(work, log);

    work(1, 2);
    work(4, 5);

    for (var i = 0; i < log.length; i++) {
        var args = log[i];
        alert("Лог: " + args.join() );
    }
    */ //(+)
    /*
    function work(a, b) {
        alert( a + b );
    }

    function makeLogging(f, log) {
        function wrapper() {
            log.push([].slice.call(arguments));
            return f.apply(this, arguments);
        }
        return wrapper;
    }
    var log = [];
    work = makeLogging(work, log);

    work(1, 2);
    work(4, 5);

    for (var i = 0; i < log.length; i++) {
        var args = log[i];
        alert("Лог: " + args.join() );
    }
    */ //(+)
    /*
    function work(a, b) {
        alert( a + b );
    }

    function makeLogging(f, log) {
         function wrapper() {
            log.push( [].slice.call(arguments) );
            return f.apply(this, arguments);
        }
        return wrapper;
    }

    var log = [];
    work = makeLogging(work, log);

    work(1, 2);
    work(4, 5);

    for (var i = 0; i < log.length; i++) {
        var args = log[i];
        alert("Лог: " + args.join( ) );
    }
    */ //(+)
    /*
    function work(a, b) {
        alert( a + b );
    }

    function makeLogging(f, log) {
        function wrapper() {
            log.push( [].slice.call(arguments) );
            return f.apply( this, arguments );
        }
        return wrapper;
    }

    var log = [];
    work = makeLogging(work, log);

    work(1, 2); // 3
    work(4, 5); // 9

    for (var i = 0; i < log.length; i++) {
        var args = log[i]; // массив из аргументов i-го вызова
        alert( 'Лог:' + args.join() ); // "Лог:1,2", "Лог:4,5"
    }
    */ //(+)
    /*
    function work(a, b) {
        alert(a + b);
    }

    function makeLogging(f, log) {
        function wrapper() {
            log.push( [].slice.call(arguments) );
            return f.apply(this, arguments);
        }
        return wrapper;
    }

    var log = [];
    work = makeLogging(work, log);

    work(1, 2);
    work(4, 5);

    for (var i = 0; i < log.length; i++) {
        var args = log[i];
        alert("Лог: " + args.join() );
    }
    */ //(+)
    /*
    function work(a, b) {
        alert( a + b );
    }

    function makeLogging(f, log) {
        function wrapper() {
            log.push([].slice.call(arguments) );
            return f.apply(this, arguments);
        }
        return wrapper;
    }

    var log = [];
    work = makeLogging(work, log);

    work(1, 2); // 3
    work(4, 5); // 9

    for (var i = 0; i < log.length; i++) {
        var args = log[i];
        alert( 'Лог:' + args.join() );
    }
    */ //(+)
    /*
    function work(a, b) {
        alert(a + b);
    }

    function makeLogging(f, log) {
        return function () {
            log.push([].slice.call(arguments));
            return f.apply(this, arguments);
        }
    }

    var log = [];
    work = makeLogging(work, log);

    work(1, 2);
    work(4, 5);

    for (var i = 0; i < log.length; i++) {
        var args = log[i];
        alert("Лог: " +args.join() );
    }
    */ //(+)
    /*
    function work(a, b) {
        alert( a + b );
    }

    function makeLogging(f, log) {
        return function () {
            log.push([].slice.call(arguments));
            return f.apply(this, arguments);
        }
    }
    var log = [];
    work1 = makeLogging( work, log );

    work1(1, 2);
    work1(4, 5);

    for (var i = 0; i < log.length; i++) {
        var args = log[i];
        alert("Лог: " + args.join( ) );
    }
    */ //(+)
    /*
    function work(a, b) {
        alert(a + b);
    }

    function makeLogging(f, log) {
        return function () {
            log.push([].slice.call(arguments));
            return f.apply(this, arguments);
        }
    }

    var log = [];
    work = makeLogging(work, log);

    work(1, 2);
    work(4, 5);

    for (var i = 0; i < log.length; i++) {
        var args = log[i];
        alert( "Лог: " + args.join() );
    }
    */ //(+)
    /*
    function work(a, b) {
        alert(a + b);
    }

    function makeLogging(f, log) {
        function wrapper() {
            log.push([].slice.call(arguments));
            return f.apply(this, arguments);
        }
        return wrapper;
    }

    var log = [];
    work = makeLogging(work, log);


    work(1, 2);
    work(4, 5);

    for (var i = 0; i < log.length; i++) {
        var args = log[i];
        alert("Лог: " + args.join());
    }
    */ //(+)

    // Кеширующий декоратор
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};

        return function (x) {
            if (!(x in cache)) {
                cache[x] = f.apply( this, arguments);
            }
            return cache[x];
        };
    }

    f = makeCaching(f);
    var a , b;

    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(-)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};

        return function (x) {
        if (!(x in cache)) {
            cache[x] = f.call(this, x);
        }
         return cache[x];
        };
    }

    f = makeCaching(f);

    var a, b;
    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(-)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCache(f) {
        var obj = {};

        return function (x) {
            if (!obj[x]) {
                obj[x] = f.call(this, x);
            }
            return obj[x];
        };

    }

    f = makeCache(f);
    var a, b;
    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(+)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};

        return function (x) {
            if (!(x in cache)) {
                cache[x] = f.call(this, x);
            }
            return cache[x];
        }
    }

    f = makeCaching(f);

    var a, b;
    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(+-)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = [];
        function wrapper(x) {
            if (!(cache[x])) cache[x] = f.apply(this, arguments);
            return cache[x];
        }
        return wrapper;
    }

    f = makeCaching(f);

    var a , b;
    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(+-)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};
        return function (x) {
            if (!(x in cache)) {
                cache[x] = f.call(this, x);
            }
            return cache[x];
        }
    }

    f = makeCaching(f);

    var a, b;

    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(+)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};
        return function(x) {
            if (!(x in cache)) {
               cache[x] = f.call(this, x );
            }
            return cache[x];
        }
    }

    f = makeCaching(f);

    var a, b;

    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(+)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};
        return function (x) {
            if (!(x in cache)) {
                cache[x] = f.call(this, x);
            }
            return cache[x];
        }
    }

    f = makeCaching(f);

    var a, b;

    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(+)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};
        return function (x) {
            if (!(x in cache)) {
                cache[x] = f.apply(this, arguments);
            }
            return cache[x];
        }
    }

    f = makeCaching(f);

    var a, b;
    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(+)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};
        return function (x) {
            if (!(x in cache)) {
                cache[x] = f.call(this, x);
            }
            return cache[x];
        }
    }

    f = makeCaching(f);

    var a, b;
    a = f(1);
    b = f(1);
    alert( a == b );
    b = f(2);
    alert( a == b );
    */ //(+)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};
        return function (x) {
            if (!(x in cache)) {
                cache[x] = f.call(this, x);
            }
            return cache[x];
        }
    }

    f = makeCaching(f);
    var a, b;
    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(+)
    /*
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};
        function wrapper(x) {
            if (!(x in cache)) {
                cache[x] = f.call(this, x);
            }
            return cache[x];
        }
        return wrapper;
    }

    f = makeCaching(f);

    var a, b;
    a = f(1);
    b = f(1);
    alert( a == b );

    b = f(2);
    alert( a == b );
    */ //(+)

    // Полиморфная функция formatDate
    /*
    function formatDate(date) {
        if (typeof date == 'number') {
            // перевести секунды в миллисекунды и преобразовать к Date
            date = new Date(date * 1000);
        } else if (typeof date == 'string') {
            // строка в стандартном формате автоматически будет разобрана в дату
            date = new Date(date);
        } else if (Array.isArray(date)) {
            date = new Date(date[0], date[1], date[2]);
        }
        // преобразования для поддержки полиморфизма завершены,
        // теперь мы работаем с датой (форматируем её)

        return date.toLocaleString("ru",
                {day: '2-digit', month: '2-digit', year: '2-digit'});

    }

    alert( formatDate("2011-10-02") );
    alert( formatDate(1234567890) );
    alert( formatDate([2014, 0, 1]) );
    alert( formatDate(new Date(2014, 0, 1)) );
    */ //(+-)
    /*
    function formatDate(date) {
        if (typeof date == "string") {
            date = new Date(date);
        } else if (typeof date == "number") {
            date = new Date(date * 1000);
        } else if (Array.isArray(date)) {
            date = new Date(date[0], date[1], date[2]);
        }

        return date.toLocaleString("ru",
                {day: '2-digit', month: '2-digit', year: '2-digit'});
    }

    alert( formatDate("2011-10-02") );
    alert( formatDate(1234567890) );
    alert( formatDate([2014, 0, 1]) );
    alert( formatDate(new Date(2014, 0, 1)) );
    */ //(+-)
    /*
    function formatDate(date) {
    if (typeof date == "string") {
        date = new Date(date);
    }   else if (typeof date == "number") {
        date = new Date(date * 1000);
    } else  if (Array.isArray(date) ) {
        date = new Date( date[0], date[1], date[2] );
    }
        //return date.toLocaleString("ru", {
        //    day: "2-digit", month: "2-digit", year: "2-digit" });
        var day = date.getDate();
        if (date < 10) day = "0" + date.getDate();

        var month = date.getMonth() + 1;
        if (month < 10) month = "0" + month;

        var year = date.getFullYear() % 100;
        if (year < 10) year = "0" + year;

        return  day + ":" + month + ":" + year;
    }

    alert( formatDate("2011-10-02") );
    alert( formatDate(1234567890) );
    alert( formatDate([2014, 0, 1]) );
    alert( formatDate(new Date(2014, 0, 1)) );
    */ //(+)
    /*
    function formatDate(date) {
        var toString = {}.toString;
        var typeDate = {}.toString.call(date).slice(8, -1);
        if (typeDate == "String") {
            date = new Date(date);
        } else if (typeDate == "Number") {
            date = new Date(date * 1000);
        } else if (typeDate == "Array") {
            date = new Date(date[0], date[1], date[2]);
        }

        var day = date.getDate();
        if (day < 10) day = "0" + date.getDate();

        var month = date.getMonth() + 1;
        if (month < 10) month = "0" + ( date.getMonth() + 1 );

        var year = date.getFullYear() % 100;

    return year + ":" + month + ":" + day;
    }

    alert( formatDate("2011-10-02") );
    alert( formatDate(1234567890) );
    alert( formatDate([2014, 0, 1]) );
    alert( formatDate(new Date(2014, 0, 1)) );
    */ //(+)
    /*
    function formatDate(date) {
        var prop = {}.toString.call(date).slice(8, -1);
        if ( prop == "String") {
            date = new Date(date);
        } else if ( prop == "Number" ) {
            date = new Date(date * 1000);
        } else if ( prop == "Array") {
            date = new Date(date[0], date[1], date[2]);
        } else if ( prop == "Date") {
            date = new Date(date);
        }

        var day = date.getDate();
        if (day < 10) day = '0' + day;

        var month = date.getMonth() + 1;
        if (month < 10) month = '0' + month;

        // взять 2 последние цифры года
        var year = date.getFullYear() % 100;
        if (year < 10) year = '0' + year;

        var formattedDate = day + '.' + month + '.' + year;

        return formattedDate;
    }

    alert( formatDate('2011-10-02') );
    alert( formatDate(1234567890) );
    alert( formatDate([2014, 0, 1]) );
    alert( formatDate(new Date(2014, 0, 1)) );
    */ //(+-)
    /*
    function formatDate(date) {

        function getClass(obj) {
            return {}.toString.call(obj).slice(8, -1);
        }

        if (getClass(date) == "String") {
            date = new Date(date);
        } else if (getClass(date) == "Number") {
            date = new Date(date * 1000);
        } else  if (getClass(date) == "Array") {
            date = new Date(date[0], date[1], date[2]);
        } else if (getClass(date) == "Date") {
            date = new Date(date);
        }

        return date.toLocaleString("ru", {
           day: "2-digit",
           month: "2-digit",
           year: "2-digit"
        });
    }

    alert( formatDate('2011-10-02') ); // 02.10.11
    alert( formatDate(1234567890) ); // 14.02.09
    alert( formatDate([2014, 0, 1]) ); // 01.01.14
    alert( formatDate(new Date(2014, 0, 1)) ); // 01.01.14
    */ //(+)

    // Превратите объект в JSON
    /*
    var leader = {
        name: "Василий Иванович",
        age: 35,
        toJSON: function () {
            return this.name + ", " + this.age;
        }
    };

    var str = JSON.stringify(leader,  "", 2);
    alert(str);

    leader = JSON.parse(str);
    alert(leader);
    */ //(+)

    // Превратите объект со ссылками в JSON
    /*
    var leader = {
        id: 1,
        name: "Василий Иванович"
    };

    var solider = {
        id: 2,
        name: "Петька"
    };

    leader.solider = 2;
    solider.leader = 1;

    var team = {
        1: leader,
        2: solider
    };

    var str = JSON.stringify(team);
    alert(str);
    */ //(-)


    //Проверка пуша
</script>
</body>
</html>